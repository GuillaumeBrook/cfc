<!DOCTYPE html>
<html ng-app="CarbonFootprintCalculator">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Alexandre Bonhomme">

    <link rel="shortcut icon" href="//assets.apisense.com/images/favicon.png">

    <title>Carbon Footprint - Dashboard</title>
    <link rel="stylesheet" href="libs/css/jquery-ui.min.css">
    <link rel="stylesheet" href="libs/css/bootstrap.min.css">
    <link rel="stylesheet" href="libs/css/bootstrap-select.min.css">
    <link rel="stylesheet" href="libs/css/datepicker.css">
    
    <!-- Style -->
    <link rel="stylesheet" href="libs/css/bootstrap-theme.min.css">
    <!-- <link rel="stylesheet" href="libs/css/bootstrap-united.min.css"> -->

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <style id="holderjs-style" type="text/css"></style>

    <!-- Leaflet visualization -->
    <link rel="stylesheet" href="libs/leaflet-0.7.2/leaflet.css" />
    <link rel="stylesheet" href="libs/css/MarkerCluster.css">
    <link rel="stylesheet" href="libs/css/MarkerCluster.Default.css">

    <link rel="stylesheet" href="dashboard.css">
    
  </head>
  <body ng-controller="mainController">

    <!-- About popup -->
    <div class="modal fade" id="about" tabindex="-1" role="dialog" aria-labelledby="aboutLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h4 class="modal-title" id="aboutLabel">About Carbon Footprint Calculator</h4>
          </div>
          <div class="modal-body">
            <h4>Authors</h4>
            <ul>
                <li>Alexandre Bonhomme</li>
                <li>Douchet Guillaume</li>
                <li>Christophe Ribeiro</li>
                <li>Nicolas Haderer</li>
            </ul>

            <h4>Partners</h4>
            <div class="row">
              <a href="www.univ-lille1.fr" target="_blank">
                <div class="col-md-6"><img src="images/logo-lille1.png" alt="Université Lille 1" class="img-responsive"></div>
              </a>
              <a href="www.inria.fr/centre/lille" target="_blank">
                <div class="col-md-6"><img src="images/logo-inria.png" alt="INRIA" class="img-responsive"></div>
              </a>
            </div>
            <div class="row">
              <div class="col-md-6"><img src="images/logo-microsoft.jpg" alt="Microsoft" class="img-responsive"></div>
              <a href="http://download.apisense.fr/apps/Bee" target="_blank">
                <div class="col-md-6"><img src="images/logo-apisense.png" alt="APISENSE" class="img-responsive"></div>
              </a>
            </div>

            <h4><a target="_blank" href="http://download.apisense.fr/apps/Bee">Apisense Application</h4>
            <div class="row">
              <div class="col-md-6"><img width="200px" height="200px" src="images/app_qrcode.png" alt="Microsoft" class="img-responsive"></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Navigation menu -->
    <div id="navBar" align="center" class="navbar navbar-inverse navbar-fixed-top" role="navigation" style="border-radius: 0px 0px 10px 10px; background-color: #222222;">
	    <div style="float: right;" class="container-fluid">
        <h4 id="abouth4" style="color: grey; margin-top: 15px;">
          <a data-target="#about" data-toggle="modal" href="#">About</a>
        </h4>
        <div class="form-group">
      		<button id="butToggle" onClick="toggleMap()">
            <img heigth="32px" width="32px" src="images/icon-map.png" alt="Toggle Map">
          </button>
          <a data-target="#about" data-toggle="modal" href="#">
            <button id="butAbout" onClick="" >
                <img height="32px" width="32px" src="images/point-interrogation-ctco.png" alt="About" />
            </button>
          </a>
          <a target="_blank" href="http://download.apisense.fr/apps/Bee">
            <button id="butDwl">
              <img height="32px" width="32px" src="images/app.png" alt="ApiSense" />
            </button>
          </a>
        </div>
    	</div>

    	<div class="navbar-bar inner">
        	<div class="container-fluid">

              <h2 id="h2menu">
              <a href="http://localhost:9000/map">
                Carbon Footprint Calculator
              </a>
              </h2>

              <!-- mobile -->
              <h2 id="h2menu2">
              <a href="http://localhost:9000/map">
                CFC
              </a>
              </h2>
        	</div>
        </div>
    </div><br/ >

    <div class="left center" style="text-align: center;">
	    <p id="pPick"> Please pick a user. You can also change the interval of dates.</p>
      <form class="form-horizontal" role="form">
  	    <select id="select-user" class="form-control selectpicker" data-live-search="true" ng-model="userId" ng-options="u.user as u.user.substring(0,4) for u in users" ng-change="getCarbonFootprint()">
  	        <option id="optionDefault" style="font-weight: bold;" value="">-- List of users --</option>
  	    </select>
      </form>

      <div id="calendars" class="form-group" ng-model="dates" cfc-datescalendars >
        <div class="input-group date">
          <span class="input-group-addon"><i>From</i></span>
          <input id="dpFrom" class="calendar form-control" data-provide="datepicker" placeholder=" From" readonly />
          <span class="input-group-addon"><i>To</i></span>
          <input id="dpTo" class="calendar form-control" data-provide="datepicker" placeholder=" To" readonly />
          <span class="input-group-addon"><i class="icon-th glyphicon glyphicon-calendar"></i></span>
        </div>
      </div>
    </div>

    <div id="rightTab" style="text-align: center;">
		<!-- Statistics table -->
    	<div style="text-align: center;" class="row">
     	<h2 class="reportTitle" class="sub-header">Reports : </h2>
      		<div class="table-responsive">
        		<table style="font-size: 13x;" class="table table-striped table-condensed">
          		<thead>
            		<tr>
		              <th class="text-center">Transport</th>
		              <th class="text-center">Dist (km)</th>
		              <th class="text-center">Aggregated rides</th>
		              <th class="text-center">Total emission (kg eq. CO₂)</th>
		              <th class="text-center">Date</th>
            		</tr>
            		<tr class="{{ ride.colorClass }}" ng-repeat="ride in aggRides">
		              <td class="text-center">{{ ride.type }}</td>
		              <td class="text-center">{{ ride.distance.toFixed(3) }}</td>
		              <td class="text-center">{{ ride.numberOfRides }}</td>
		              <td class="text-center">{{ ride.emission.toFixed(1) }}</td>
		              <td class="text-center">{{ ride.date }}</td>
		            </tr>
          		</thead>
          		<tbody class="rides-list"></tbody>
       			</table>
      		</div>
    	</div>
    	<h1 id="h1CF" style="font-style: italic;" class="page-header" id="carbon-footprint-total">
      		0.00kg{{ carbonFootprint }}<br>
      	<small>0.00kg/km{{ carbonFootprintPerKm }}</small>
    	</h1>
   	</div>

   	<div id="map">
    	<div align="right" id="button-wrapper">
            <button id="butCycleMap" type="button" class="btn btn-success" btn-checkbox ng-model="bCycleMap" ng-change="toggleCycleMap()">
            	Cycle paths
            </button>
            <br />
            <button id="butCluster" type="button" class="btn btn-warning" btn-checkbox ng-model="bClusters" ng-change="toggleClusters()">
            	Clusters</button>
         </div> 
    </div>

    <div id="rightTab2" class="center" style="text-align: center;">
		<!-- Statistics table -->
    	<div style="text-align: center;" class="row">
    	<h2 style="display: inline; font-style: italic;" class="sub-header">0.00kg{{ carbonFootprint }} ; </h2>
      <h3 style="display: inline;">0.00kg/km{{ carbonFootprintPerKm }}</h3>
     	<h2 class="sub-header reportTitle">Reports</h2>
      		<div class="table-responsive">
        		<table style="font-size: 13x;" class="table table-striped table-condensed">
          		<thead>
            		<tr>
		              <th class="text-center"><span class="thReport">Transport</span><span class="thReportMob">Trans.</span></th>
		              <th class="text-center">Dist (km)</th>
		              <th class="text-center"><span class="thReport">Aggregated rides</span><span class="thReportMob">Agg. Rides</span></th>
		              <th class="text-center"><span class="thReport">Total emission (kg eq. CO₂)</span><span class="thReportMob">Emission</span></th>
		              <th class="text-center">Date</th>
            		</tr>
            		<tr class="{{ ride.colorClass }}" ng-repeat="ride in aggRides">
		              <td class="text-center">{{ ride.type }}</td>
		              <td class="text-center">{{ ride.distance.toFixed(3) }}</td>
		              <td class="text-center">{{ ride.numberOfRides }}</td>
		              <td class="text-center">{{ ride.emission.toFixed(1) }}</td>
		              <td class="text-center">{{ ride.date }}</td>
		            </tr>
          		</thead>
          		<tbody class="rides-list"></tbody>
       			</table>
      		</div>
    	</div>
   	</div>

    <!-- Bottom -->
    <hr id="hrBot">

    <div id="alertBot" class="alert alert-info fade in">
      <div class="container-fluid text-center">
        <a id="aBot" target="_blank" href="http://download.apisense.fr/apps/Bee">Download Apisense, the Android Application for collecting Data</a>
        <br /><i>This application will allow you to collect data. Then you can select yourself</i>
      </div>
    </div>


    <script src="libs/jquery-2.1.1.min.js"></script>
    <script src="libs/jquery-ui-1.10.4.min.js"></script>
    <script src="libs/moment.min.js"></script>
    <script src="ui.js"></script>

    <script src="libs/bootstrap/bootstrap.min.js"></script>
    <script src="libs/bootstrap/docs.min.js"></script>
    <script src="libs/bootstrap/bootstrap-select.min.js"></script>

    <script src="libs/jQDateRangeSlider-min.js"></script>
    <script src="libs/js/bootstrap-datepicker.js"></script>

    <script src="libs/leaflet-0.7.2/leaflet.js"></script>
    <script src="libs/leaflet.polylineDecorator.min.js"></script>
    <script src="libs/leaflet.markercluster.min.js"></script>

    <script src="libs/angular-1.2.10.min.js"></script>
    <script src="libs/ui-bootstrap-buttons-tpls-0.10.0.min.js"></script>
    <script src="controller.js"></script>

    <script type="text/javascript">
      function toggleMap() {
        $("#map").slideToggle();
      }
    </script> 

    </body>
</html>
